
Процедура BusinessEntityФормаВыбора(пФормаВладелец, пОписаниеОповещения, пСтандартнаяОбработка = Неопределено, пТекущееЗначение = Неопределено, пПараметры = Неопределено) Экспорт
	
	_Параметры = ?(пПараметры = Неопределено, Новый Структура, пПараметры);
	
	Если _Параметры.Свойство("Свои") Тогда
		
		_Параметры.Вставить("ЗапросУсловия", "И _Таблица.Ссылка В (Выбрать Различные ХозяйствующийСубъект ИЗ РегистрСведений.ВетисПредприятияХС)");
		
	КонецЕсли;
	
	ОткрытьФормуВыбора(пФормаВладелец, "BusinessEntity", пОписаниеОповещения, пСтандартнаяОбработка, пТекущееЗначение, _Параметры);
	
КонецПроцедуры

Процедура EnterpriseФормаВыбора(пФормаВладелец, пОписаниеОповещения, пСтандартнаяОбработка = Неопределено, пТекущееЗначение = Неопределено, пХС = Неопределено, пПараметры = Неопределено) Экспорт
	
	_Параметры = пПараметры;
	
	Если НЕ пХС = Неопределено Тогда
		
		_Параметры = ?(_Параметры = Неопределено, Новый Структура, _Параметры);
		_Параметры.Вставить("ЗапросСоединения", "ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ВетисПредприятияХС КАК _ПредприятияХС ПО _Таблица.Ссылка = _ПредприятияХС.Предприятие");
		_Параметры.Вставить("ЗапросУсловия", "И _ПредприятияХС.ХозяйствующийСубъект = &ХС");
		_Параметры.Вставить("ЗапросПараметры", Новый Структура("ХС", пХС));
		
	КонецЕсли;
	
	ОткрытьФормуВыбора(пФормаВладелец, "Enterprise", пОписаниеОповещения, пСтандартнаяОбработка, пТекущееЗначение, _Параметры);
	
КонецПроцедуры

Процедура CountryФормаВыбора(пФормаВладелец, пОписаниеОповещения, пСтандартнаяОбработка = Неопределено, пТекущееЗначение = Неопределено, пПараметры = Неопределено) Экспорт
	
	ОткрытьФормуВыбора(пФормаВладелец, "Country", пОписаниеОповещения, пСтандартнаяОбработка, пТекущееЗначение, пПараметры);
	
КонецПроцедуры

Процедура DistrictФормаВыбора(пФормаВладелец, пОписаниеОповещения, пСтандартнаяОбработка = Неопределено, пТекущееЗначение = Неопределено, пПараметры = Неопределено) Экспорт
	
	ОткрытьФормуВыбора(пФормаВладелец, "District", пОписаниеОповещения, пСтандартнаяОбработка, пТекущееЗначение, пПараметры);
	
КонецПроцедуры

Процедура RegionФормаВыбора(пФормаВладелец, пОписаниеОповещения, пСтандартнаяОбработка = Неопределено, пТекущееЗначение = Неопределено, пПараметры = Неопределено) Экспорт
	
	ОткрытьФормуВыбора(пФормаВладелец, "Region", пОписаниеОповещения, пСтандартнаяОбработка, пТекущееЗначение, пПараметры);
	
КонецПроцедуры

Процедура SubProductФормаВыбора(пФормаВладелец, пОписаниеОповещения, пСтандартнаяОбработка = Неопределено, пТекущееЗначение = Неопределено, пПараметры = Неопределено) Экспорт
	
	ОткрытьФормуВыбора(пФормаВладелец, "SubProduct", пОписаниеОповещения, пСтандартнаяОбработка, пТекущееЗначение, пПараметры);
	
КонецПроцедуры

Процедура ProductItemФормаВыбора(пФормаВладелец, пОписаниеОповещения, пСтандартнаяОбработка = Неопределено, пТекущееЗначение = Неопределено, пПредприятие = Неопределено, пПараметры = Неопределено) Экспорт
	
	_Параметры = Новый Структура;
	
	Если НЕ пПараметры = Неопределено Тогда
		Для каждого _элем Из пПараметры Цикл
			_Параметры.Вставить(_элем.Ключ, _элем.Значение);
		КонецЦикла;
	КонецЕсли;
	
	//приоритет у параметров процедуры
	Если НЕ пПредприятие = Неопределено Тогда
		Если НЕ _Параметры.Свойство("ЗапросПараметры") Тогда
			_Параметры.Вставить("ЗапросПараметры", Новый Структура);
		КонецЕсли;
		Если НЕ _Параметры.Свойство("ЗапросУсловия") Тогда
			_Параметры.Вставить("ЗапросУсловия");
		КонецЕсли;
		_Параметры.ЗапросУсловия = "И _Соответствие.Предприятие = &Предприятие";
		_Параметры.ЗапросПараметры.Вставить("Предприятие", пПредприятие);
	КонецЕсли;
	
	ОткрытьФормуВыбора(пФормаВладелец, "ProductItem", пОписаниеОповещения, пСтандартнаяОбработка, пТекущееЗначение, _Параметры);
	
КонецПроцедуры

Процедура AddressФормаВыбора(пФормаВладелец, пОписаниеОповещения, пСтандартнаяОбработка = Неопределено, пТекущееЗначение = Неопределено, пРодитель = Неопределено, пПараметры = Неопределено) Экспорт
	
	_Параметры = Новый Структура;
	
	Если НЕ пПараметры = Неопределено Тогда
		Для каждого _элем Из пПараметры Цикл
			_Параметры.Вставить(_элем.Ключ, _элем.Значение);
		КонецЦикла;
	КонецЕсли;
	
	//приоритет у параметра процедуры
	Если НЕ пРодитель = Неопределено Тогда
		_Параметры.Вставить("Родитель", пРодитель);
	КонецЕсли;
	
	ОткрытьФормуВыбора(пФормаВладелец, "Address", пОписаниеОповещения = Неопределено, пСтандартнаяОбработка, пТекущееЗначение, _Параметры);
	
КонецПроцедуры

Процедура UnitФормаВыбора(пФормаВладелец, пОписаниеОповещения, пСтандартнаяОбработка = Неопределено, пТекущееЗначение = Неопределено, пПараметры = Неопределено) Экспорт
	
	ОткрытьФормуВыбора(пФормаВладелец, "Unit", пОписаниеОповещения, пСтандартнаяОбработка, пТекущееЗначение, пПараметры);
	
КонецПроцедуры

Процедура ПользователиФормаВыбора(пФормаВладелец, пОписаниеОповещения, пСтандартнаяОбработка = Неопределено, пТекущееЗначение = Неопределено, пПараметры = Неопределено) Экспорт
	
	ОткрытьФормуВыбора(пФормаВладелец, "Пользователи", пОписаниеОповещения, пСтандартнаяОбработка, пТекущееЗначение, пПараметры);
	
КонецПроцедуры

Процедура ОткрытьФормуВыбора(пФормаВладелец, пИмяСправочника, пОписаниеОповещения, пСтандартнаяОбработка = Неопределено, пТекущееЗначение = Неопределено, пПараметры = Неопределено)
	
	пСтандартнаяОбработка = Ложь;
	
	_Параметры = Новый Структура("Имя", пИмяСправочника);
	
	Если НЕ пТекущееЗначение = Неопределено Тогда
		_Параметры.Вставить("Ключ", пТекущееЗначение);
	КонецЕсли;
	
	Если НЕ пПараметры = Неопределено Тогда
		Для каждого _элем Из пПараметры Цикл
			_Параметры.Вставить(_элем.Ключ, _элем.Значение);
		КонецЦикла;
	КонецЕсли;
	
	Если пОписаниеОповещения = Неопределено ИЛИ ТипЗнч(пОписаниеОповещения) = Тип("ОписаниеОповещения") Тогда
		_ОписаниеОповещения = пОписаниеОповещения;
	Иначе
		_ОписаниеОповещения = Новый ОписаниеОповещения(пОписаниеОповещения, пФормаВладелец, пПараметры);
	КонецЕсли;
	
	ОткрытьФорму("ОбщаяФорма.ВетисФормаВыбора", _Параметры, пФормаВладелец, , , , _ОписаниеОповещения);
	
КонецПроцедуры
